<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Live Freely with No Boundaries · Map</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    #map {
      height: 600px;
      width: 100%;
      border: 2px solid gray;
      margin: 20px 0;
    }
    body {
      background-color: #cadecb;
    }
    .navbar-brand {
      background-color: #90E0EF;
      padding: 5px 12px;
      border-radius: 5px;
      margin-right: 10px;
      color: black !important;
      text-decoration: none;
    }
    .navbar-brand:hover {
      color: white !important;
    }
  </style>
</head>

<body>

  <header class="site-header">
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html">Home</a>
        <a class="navbar-brand" href="map2.html">Map</a>
      </div>
    </nav>
  </header>

  <main class="container text-center">
    <section>
      <h1>Live Freely With No Boundaries</h1>
      <p>Zoom, click, explore any public / no permit required place.</p>
      
      <div id="map"></div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>© 2025 Sydney's site for GEOG 464.</p>
    </div>
  </footer>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
  // Initialize map
  var map = L.map('map').setView([69.4267, -88.5938], 2.5);

  // Basemap (Street only)
  var street = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© OpenStreetMap contributors'
  }).addTo(map);

  // Hover event function
  function attachEvents(feature, layer) {
    let tooltipContent = '';
    for (const key in feature.properties) {
      tooltipContent += `<strong>${key}</strong>: ${feature.properties[key]}<br>`;
    }
    layer.bindTooltip(tooltipContent, { sticky: true });

    layer.on({
      mouseover: function (e) {
        e.target.setStyle({ color: 'yellow', weight: 3, fillOpacity: 0.6 });
      },
      mouseout: function (e) {
        e.target.setStyle({ color: layer.options.color, weight: 2, fillOpacity: 0.3 });
      }
    });
  }

  // GeoJSON list for single URLs
  var geojsonFiles = [
    { name: "Manitoba", url: "https://raw.githubusercontent.com/sreymon/464WEBSITE1/refs/heads/main/Manitoba_Parks_Filtered_final.geojson", color: "purple" },
    { name: "Saskatchewan", url: "https://raw.githubusercontent.com/sreymon/464WEBSITE1/refs/heads/main/Saskatchewan_Parks_Modified_renamed_final_last.geojson", color: "orange" }
  ];

  var overlayLayers = {};

  // Load single URL layers
  geojsonFiles.forEach(file => {
    fetch(file.url)
      .then(res => res.json())
      .then(data => {
        var layer = L.geoJSON(data, {
          style: { color: file.color, weight: 2, fillOpacity: 0.3 },
          onEachFeature: attachEvents
        });

        overlayLayers[file.name] = layer;

        if (Object.keys(overlayLayers).length === 1) {
          layer.addTo(map);
        }

        if (!window.layerControl) {
          window.layerControl = L.control.layers(
            { "Street": street },
            overlayLayers,
            { collapsed: false }
          ).addTo(map);
        } else {
          window.layerControl.addOverlay(layer, file.name);
        }
      })
      .catch(err => console.error("Error loading GeoJSON:", file.url, err));
  });

  // Quebec with two URLs under one layer
  var quebecFiles = [
    "https://raw.githubusercontent.com/sreymon/464WEBSITE1/refs/heads/main/QC_1real_final_last.geojson",
    "https://raw.githubusercontent.com/sreymon/464WEBSITE1/refs/heads/main/QC_2real_final_last.geojson"
  ];

  var quebecLayer = L.layerGroup();

  quebecFiles.forEach(url => {
    fetch(url)
      .then(res => res.json())
      .then(data => {
        var layer = L.geoJSON(data, {
          style: { color: "blue", weight: 2, fillOpacity: 0.3 },
          onEachFeature: attachEvents
        });
        quebecLayer.addLayer(layer);
      })
      .catch(err => console.error("Error loading Quebec GeoJSON:", url, err));
  });

  // Add Quebec to overlay layers
  overlayLayers["Quebec"] = quebecLayer;

  // Add Quebec layer to layer control after it's created
  if (window.layerControl) {
    window.layerControl.addOverlay(quebecLayer, "Quebec");
  }

  var peiFiles = [
    "https://raw.githubusercontent.com/sreymon/464WEBSITE1/refs/heads/main/pei_prov_parks_finaL_last.geojson"
  ];

  var peiLayer = L.layerGroup();

  peiFiles.forEach(url => {
    fetch(url)
      .then(res => res.json())
      .then(data => {
        var layer = L.geoJSON(data, {
          style: { color: "red", weight: 2, fillOpacity: 0.3 },
          onEachFeature: attachEvents
        });
        peiLayer.addLayer(layer);
      })
      .catch(err => console.error("Error loading pei GeoJSON:", url, err));
  });

  overlayLayers["Prince Edward Island"] = peiLayer;

  if (window.layerControl) {
    window.layerControl.addOverlay(peiLayer, "Prince Edward Island");
  }

var OntarioFiles = [
    "https://raw.githubusercontent.com/sreymon/464WEBSITE1/refs/heads/main/wilderness_areas_final_last.geojson",
    "https://raw.githubusercontent.com/sreymon/464WEBSITE1/refs/heads/main/PROV_PARK_REGULATED_final_last_last_part1.geojson",
    "https://raw.githubusercontent.com/sreymon/464WEBSITE1/refs/heads/main/PROV_PARK_REGULATED_final_last_last_part2.geojson",
    "https://raw.githubusercontent.com/sreymon/464WEBSITE1/refs/heads/main/PROV_PARK_REGULATED_final_last_last_part3.geojson",
    "https://raw.githubusercontent.com/sreymon/464WEBSITE1/refs/heads/main/protected_areas_far_north_final.geojson"
  ];

  var OntarioLayer = L.layerGroup();

  OntarioFiles.forEach(url => {
    fetch(url)
      .then(res => res.json())
      .then(data => {
        var layer = L.geoJSON(data, {
          style: { color: "green", weight: 2, fillOpacity: 0.3 },
          onEachFeature: attachEvents
        });
        OntarioLayer.addLayer(layer);
      })
      .catch(err => console.error("Error loading Ontario GeoJSON:", url, err));
  });

  overlayLayers["Ontario"] = OntarioLayer;

  if (window.layerControl) {
    window.layerControl.addOverlay(OntarioLayer, "Ontario");
  }

  var NovaScotiaFiles = [
    "https://raw.githubusercontent.com/sreymon/464WEBSITE1/refs/heads/main/ns_provincial_parks_final.geojson"
  ];

  var NovaScotiaLayer = L.layerGroup();

  NovaScotiaFiles.forEach(url => {
    fetch(url)
      .then(res => res.json())
      .then(data => {
        var layer = L.geoJSON(data, {
          style: { color: "pink", weight: 2, fillOpacity: 0.3 },
          onEachFeature: attachEvents
        });
        NovaScotiaLayer.addLayer(layer);
      })
      .catch(err => console.error("Error loading NovaScotia GeoJSON:", url, err));
  });

  
  overlayLayers["Nova Scotia"] = NovaScotiaLayer;

  if (window.layerControl) {
    window.layerControl.addOverlay(NovaScotiaLayer, "Nova Scotia");
  }
  
  // Click popup
  map.on('click', function (e) {
    L.popup()
      .setLatLng(e.latlng)
      .setContent(`You clicked at: ${e.latlng.lat.toFixed(4)}, ${e.latlng.lng.toFixed(4)}`)
      .openOn(map);
  });
</script>

</body>
</html>
